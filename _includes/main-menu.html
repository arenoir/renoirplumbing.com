{% assign paths = page.url | downcase | split: '/' %}
{% assign base_path = paths[1] %}
{% if base_path == nil %}
  {% assign base_path = "" %}
{% endif %}

<div id="main-menu" class="main-menu">
  {% assign mainmenu = site.data.menus.main | sort: 'weight'  %}
  <ul>
    {% for item in mainmenu %}
      {% assign item_path = item.url | replace: '/', '' %}
      <li class="{% if item_path == base_path %}active{% endif %}">
        <a href="{{ item.url | relative_url }}">{{ item.name }}</a>
      </li>
    {% endfor %}
  </ul>
</div>
